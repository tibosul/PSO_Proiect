# dns.conf 
# Supported blocks: options { ... }, zone "..." { ... }
# Strings in quotes, each statement must end with ';'

options {
    # Paths
    directory   "../data";          # optional base dir
    zones_dir   "../data/dns_zones";    # where zone files live

    # Listener
    listen_ip   "0.0.0.0";
    port        5379;              # Pentru testare, in mod normal se utilizeaza portul 53
    # Mode: "authoritative" | "recursive" | "forwarder" | "mixed"
    mode        "mixed";

    # Logging
    log_level   "info";            # off|fatal|error|warn|notice|info|debug

    # Recursion ACL (clients allowed to use recursion/forwarding)
    recursion_allow { "127.0.0.1/32"; "192.168.42.0/24"; };

    # Upstream DNS servers for non-local domains
    forwarders { "8.8.8.8"; "1.1.1.1"; };

    # Cache (RRSet-based, with TTL clamps)
    cache {
        enabled      yes;          # yes|no
        max_entries  10000;        # LRU cap
        ttl_cap      86400;        # cap positive TTLs (s)
        neg_ttl      60;           # NXDOMAIN/NODATA TTL (s)
    };
};

# --------------------------- ZONES ---------------------------

# Root hints (optional for your subset; keep file under ../data if you use it)
zone "." {
    type hint;                   # treat as 'hint' conceptually in your code if desired
    file "named.root";             # ../data/named.root
    ttl_default 3600;
};

# Localhost forward zone
zone "localhost" {
    type master;
    file "localhost.zone";         # ../data/dns_zones/localhost.zone
    ttl_default 3600;
};

# Localhost reverse (127.0.0.x)
zone "0.0.127.in-addr.arpa" {
    type master;
    file "127.0.0.zone";           # ../data/dns_zones/127.0.0.zone
    ttl_default 3600;
};

zone "proiect_pso.ro." {
    type master;
    file "proiect_pso.ro.zone";        # ../data/dns_zones/company.xy.zone
    ttl_default 3600;
};

# Reverse zone for 192.168.42.0/24
zone "42.168.192.in-addr.arpa." {
    type master;
    file "192.168.42.rev.zone";    # ../data/dns_zones/192.168.42.rev.zone
    ttl_default 3600;
};
